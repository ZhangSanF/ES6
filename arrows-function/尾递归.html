<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
     /**
    * 函数调用自身，称为递归。如果尾调用自身，就称为尾递归
    * 递归非常耗费内存，因为需要同时保存成千上百个调用帧，很容易发生“栈溢出”错误（stack overflow）。
    * 但对于尾递归来说，由于只存在一个调用帧，所以永远不会发生“栈溢出”错误。
    */   
   
    // 阶乘函数
    function factorial(n) {
        if (n === 1) return 1;
        return n * factorial(n - 1);
    }
    factorial(5) // 120

    // 阶乘函数尾递归
    function factorial(n, total = 1) {
        if (n === 1) return total;
        return factorial(n - 1, n * total);
    }
    factorial(5) // 120

    // 计算 Fibonacci 数列
    function Fibonacci (n) {
        if ( n <= 1 ) {return 1};
        return Fibonacci(n - 1) + Fibonacci(n - 2);
    }
    // Fibonacci(10) // 89
    // Fibonacci(100) // 超时
    //Fibonacci(500) // 超时

    // 计算 Fibonacci 数列尾递归
    function Fibonacci2 (n , ac1 = 1 , ac2 = 1) {
        if( n <= 1 ) {return ac2};
        return Fibonacci2 (n - 1, ac2, ac1 + ac2);
    }
    Fibonacci2(100) // 573147844013817200000
    Fibonacci2(1000) // 7.0330367711422765e+208
    // Fibonacci2(10000) // Infinity
    </script>
</body>
</html>